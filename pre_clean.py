import re
from spellchecker import SpellChecker
from pathinator import dictionary

# ðŸ”¹ Carica dizionario personalizzato da index.dic
def load_custom_dictionary(path=dictionary):
    with open(path, 'r', encoding='utf-8') as f:
        lines = f.readlines()
    custom_dict = set()
    for line in lines:
        line = line.strip()
        if not line or line.startswith('/'):  # ignora commenti e vuoti
            continue
        word = re.split(r'[\/\s]', line)[0]  # prende solo la parola prima di "/OT..."
        custom_dict.add(word.lower())
    return custom_dict

# ðŸ”¹ Inizializza dizionario e correttore
spell = SpellChecker(language='it')
custom_dictionary = load_custom_dictionary(dictionary)
spell.word_frequency.load_words(custom_dictionary)

# ðŸ”¹ Funzione aggiornata
def correct_spelling(text):
    """
    Corregge l'ortografia del testo, ignorando:
    - Punteggiatura e spazi.
    - Parole che iniziano con una lettera maiuscola.
    - Parole presenti nel dizionario personalizzato.
    """
    tokens = re.findall(r'\w+|[^\w\s]|\s', text, re.UNICODE)
    corrected_tokens = []

    for token in tokens:
        # Condizione 1: Non toccare punteggiatura, spazi o numeri
        if not token.isalpha():
            corrected_tokens.append(token)
            continue

        # Condizione 2: Non correggere parole che iniziano con maiuscola (es. nomi propri)
        if token[0].isupper():
            corrected_tokens.append(token)
            continue
            
        # Condizione 3: Non correggere parole presenti nel dizionario personalizzato
        if token.lower() in custom_dictionary:
            corrected_tokens.append(token)
            continue

        # Se nessuna delle condizioni sopra Ã¨ vera, prova a correggere la parola
        suggestion = spell.correction(token)
        corrected_tokens.append(suggestion if suggestion else token)


def replacement_rules_pro(text):
    """
    Applica una serie di regole di sostituzione al testo usando
    le espressioni regolari (regex) per una maggiore flessibilitÃ .
    """
    # Usiamo le espressioni regolari, che sono molto piÃ¹ potenti.
    # Le chiavi ora sono "pattern" regex.
    REPLACEMENT_RULES = {
        # Regole originali (alcune adattate per regex)
        r"-\s*\n\s*\n\s*\n": "", # Gestisce un trattino seguito da 0 o piÃ¹ spazi e fino a 3 "a capo"
        r"-\s*\n\s*\n": "",      # Gestisce un trattino seguito da 0 o piÃ¹ spazi e fino a 2 "a capo"
        r"-\s*\n": "",          # Gestisce un trattino seguito da 0 o piÃ¹ spazi e 1 "a capo"
        r"  +": " ",            # Sostituisce due o piÃ¹ spazi con uno solo
        r"Ã©": "Ã¨",
        
        # Le tue regole originali che funzionano bene anche qui
        r"\s+;": ";",           # Spazio/i prima di ;
        r"\s+:": ":",           # Spazio/i prima di :
        r"\s+!": "!",           # Spazio/i prima di !
        r"\s+\?": "?",           # Spazio/i prima di ? (il ? va "escapato" con \)
        r"'\s": "'",            # Apostrofo seguito da spazio
        r"'": "â€™",              # Apostrofo dritto a curvo
        r"\. \. \. \.": "â€¦",    # Quattro punti separati da spazi
        r"\. \. \.": "â€¦",       # Tre punti separati da spazi
        r"([a-zA-ZÃ Ã¨Ã©Ã¬Ã²Ã¹,] )\n\n": r"\1",
        r"([a-zA-ZÃ Ã¨Ã©Ã¬Ã²Ã¹,] )\n": r"\1",              
        
        # Ecco la regola per "qualsiasi lettera dalla a alla z"
        # Questa regola, ad esempio, potrebbe sostituire ogni lettera minuscola con "X"
        # r"[a-z]": "X", # Esempio: "ciao" -> "XXXX"
    }

    # Applichiamo ogni regola in ordine usando re.sub
    for pattern, replacement in REPLACEMENT_RULES.items():
        text = re.sub(pattern, replacement, text)
        
    return text

def replacement_rules_post(text):
    """
    Applica una serie di regole di sostituzione al testo usando
    le espressioni regolari (regex) per una maggiore flessibilitÃ .
    """
    # Usiamo le espressioni regolari, che sono molto piÃ¹ potenti.
    # Le chiavi ora sono "pattern" regex.
    REPLACEMENT_RULES = {

        r"Ã©": "Ã¨",            
        
    }

    # Applichiamo ogni regola in ordine usando re.sub
    for pattern, replacement in REPLACEMENT_RULES.items():
        text = re.sub(pattern, replacement, text)
        
    return text

def full_preclean(text):
    text = replacement_rules_pro(text)
    #text = correct_spelling(text)
    return text

'''ocr_string = "XXIX. \nRitorna a casa della Fata, la quale gli promette che il giorno \ndopo non sarÃ  piÃ¹ un burattino, ma diventerÃ  un ragazzo. \nGran colazione di caffÃ¨â€”eâ€”latte per festeggiare questo grande \navvenimento. \nMentre il pescatore era proprio sul punto di \nbuttar Pinocchio nella padella, entrÃ² nella grotta \nun grosso cane, condotto lÃ  dallâ€™odore acutissimo \ne ghiotto della frittura. \nâ€” Passa via! â€” gii gridÃ² il pescatore minacciandolo e tenendo sempre in mano il burattino \ninfarinato. \nMa il povero cane aveva una fame per quattro, e mugolando e dimenando la coda, pareva \nche dicesse: \nâ€” Dammi un boccone di frittura e ti lascio \nin pace. \nâ€” Passa via, ti dico! â€” gli ripetÃ¨ il pescatore; \ne allungÃ² la gamba per tirargli una pedata. \nAllora il cane che, quando aveva fame davvero, non era avvezzo a lasciarsi posar mosche \nsul naso, si rivoltÃ² ringhioso al pescatore, mostrandogli le sue terribili zanne. \n\n\nIn quel mentre si udÃ¬ nella grotta una vocina \nfioca fioca che disse: \nâ€” Salvami, Alidoro! Se non mi salvi, son fritto!... â€” \n\nâ€” Passa via! â€” gli gridÃ² il pescatore. \n\nIl cane riconobbe subito la voce di Pinocchio, \ne si accÃ²rse, con sua grandissima meraviglia, che \nla vocina era uscita da quel fagotto infarinato, \nche il pescatore teneva in mano. \nAllora che cosa fa? Spicca un gran lancio da \n\n\nterra, abbocca quel fagotto infarinato, e tenendolo leggermente coi denti, esce correndo dalla \ngrotta, e via come un baleno! \nIl pescatore arrabbiatissimo di vedersi strappar di mano un pesce, che egli avrebbe mangiato \ntanto volentieri, si provÃ² a rincorrere il cane; ma \nfatti pochi passi gli venne un nodo di tosse e \ndovÃ¨ tornarsene indietro. \nIntanto Alidoro, ritrovata che ebbe la viottola \n\nTenendolo leggermente coi denti, esce correndo dalla grotta, \ne via come un baleno! \n\nche conduceva al paese, si fermÃ² e posÃ² delicatamente in terra lâ€™amico Pinocchio. \nâ€” Quanto ti debbo ringraziare! â€” disse il burattino. \nâ€” Kon eâ€™Ã¨ bisogno; â€” replicÃ² il cane â€” tu \nsalvasti me, e quel che Ã¨ fatto Ã¨ reso. Si sa: in \nquesto mondo bisogna tutti aiutarsi lâ€™uno con \nlâ€™altro. \nâ€” Ma come mai sei capitato in quella grotta I \n\n\nâ€” Ero sempre qui disteso sulla spiaggia piÃ¹ \nmorto che vivo, quando il vento mi ha portato \nda lontano un odorino di frittura. Queir odorino \nmi ha stuzzicato V appetito, e io gli sono andato \ndietro. Se arrivavo un minuto piÃ¹ tardi!... \nâ€” Non me lo dire! â€” urlÃ² Pinocchio che tremava ancora dalla paura. â€” Non me lo dire! Se \ntu arrivavi un minuto piÃ¹ tardi, a questâ€™ora io \nero belPe fritto, mangiato e digerito. Brrr! mi \nvengono i brividi soltanto a pensarvi!... â€” \nAlidoro, ridendo, stese la zampa destra verso \nil burattino, il quale gliela strinse forte forte in \nsegno di grande amicizia: e dopo si lasciarono. \nIl cane riprese la strada di casa: e Pinocchio, \nrimasto solo, andÃ² a una capanna lÃ¬ poco distante, \ne domandÃ² a un vecchietto che stava sulla porta \na scaldarsi al sole: \nâ€” Dite, galantuomo, sapete nulla di un povero ragazzo ferito nel capo e che si chiamava \nEugenio? \nâ€” Il ragazzo Ã¨ stato portato da alcuni pescatori in questa capanna, e ora.... \nâ€” Ora sarÃ  morto!... â€” interruppe Pinocchio, \ncon gran dolore. \nâ€” No: ora Ã¨ vivo, ed Ã¨ giÃ  ritornato a casa \nsua. \nâ€” Davvero?... davvero?... â€” cridÃ² il burattino, \n\nBOHCINI \n\n,.^:r\nâ€” Dite, galantuomo, sapete nnlla di un pov^ero ragazzo ferito noi capo \ne che si cblamiiva Eugenio? \n\n\nsaltando dallâ€™allegrezza. â€” Dunque la ferita non \nera grave?... \nâ€” Ma poteva riuscire gravissima e anche mortale, â€” rispose il vecchietto â€” perchÃ¨ gli tirarono \nnel capo un grosso libro rilegato in cartone. \nâ€” E chi glielo tÃ¹^Ã² I \nâ€” Un suo comj)agno di scuola: un certo Pinocchio.... \nâ€” E chi Ã¨ questo Pinocchio? â€” domandÃ² il \nburattino facendo lo gnorri. \nâ€” Dicono che sia un ragazzaccio, un vagabondo, un vero rompicollo. \nâ€” Calunnie! Tutte calunnie! \nâ€” Lo conosci tu questo Pinocchio? \nâ€” Di vista! â€” rispose il burattino. \nâ€” E tu, che concetto ne hai! â€” gli chiese il \nvecchietto. \nâ€” A me mi pare un gran buon figliuolo, pieno \ndi voglia di studiare, obbediente, affezionato al \nsuo babbo e alla sua famiglia.... â€” \nMentre il burattino sfilava a faccia fresca tutte \nqueste bugie, si toccÃ² il naso e si accorse che il \nnaso gli era allungato piÃ¹ di un palmo. Allora \ntutto impaurito cominciÃ² a gridare: \nâ€” Non date retta, galantuomo, a tutto il bene \nche ve ne ho detto; perchÃ¨ conosco benissimo Pinocchio e posso assicurarvi anchâ€™io ehâ€™Ã¨ davvero \n\n\nun ragazzaccio, un disubbidiente e uno svogliato, \ne che invece di andare a scuola, va coi coDij^agni a fare lo sbarazzino! â€” \nAppena ebbe pronunziate queste parole, il suo \nnaso raccorci e tornÃ² alla grandezza naturale, \ncome era prima. \nâ€” E perchÃ¨ sei tutto bianco a codesto modo? \nâ€” gli domandÃ² a un tratto il vecchietto. \nâ€” Vi dirÃ².... senza avvedermene, mi sono strofinato a un muro, che era imbiancato di fresco â€” \nrispose il burattino vergognandosi a raccontare \nche lo avevano infarinato come un pesce, per \npoi friggerlo in padella. \nâ€” O della tua giacchetta, deâ€™tuoi calzoncini e \ndel tuo berretto, che cosa ne hai fatto? \nâ€” Ho incontrato i ladri e mi hanno spogliato. \nDite, buon vecchio, non avreste per caso da darmi \nun poâ€™di vestituccio, tanto perchÃ¨ io possa ritornare a casa? \nâ€” Eagazzo mio; in quanto a vestiti, io non \nho che un piccolo sacchetto, dove ci tengo i lupini. Se lo vuoi, piglialo: eccolo lÃ . â€” \nPinocchio non se lo fece dire due volte: prese \nsubito il sacchetto dei lupini che era vuoto, e \ndopo averci fatto colle forbici una piccola buca \nnel fondo e due buche dalle parti, se lo infilÃ² \na uso camicia. E vestito leggerino a quel modo, \n\n\nsi avviÃ² verso il paese. Ma, lungo la strada, non \nsi sentiva punto tranquillo; tantâ€™Ã¨ vero che faceva un passo avanti e uno indietro, e discorrendo da sÃ¨ solo andava dicendo: \nâ€” Come farÃ² a presentarmi alla mia buona \n\nE vestito leggerÃ¬no a quel modo, si avviÃ² verso il paese. \n\nFatina? Glie dirÃ  quando mi vedrÃ ?... VorrÃ  perdonarmi questa seconda birichinata?... Scommetto che non me la perdona!... oh! non me la \nI)erdona di certo!... E mi sta il dovere: perchÃ¨ \nio sono un monello che prometto sempre di correggermi, e non mantengo mai!... â€” \n\n^ 197 â€” \nxVitÃ¬vÃ² al paese che era giÃ  notte buia; e pefcliÃ¨ faceva tempaccio e lâ€™acqua veniva giÃ¹ a \ncatinelle, andÃ² diritto diritto alla casa della Fata, \ncoUâ€™aninio risoluto di bussare alla i^orta e di farsi \naprire. \nMa quando fu lÃ¬, sentÃ¬ mancarsi il coraggio, e \ninvece di bussare, si allenta uÃ², correndo, una ventina di passi. Poi tornÃ² una seconda volta alla \nporta, e non concluse nulla: poi si avvicinÃ² una \nterza volta e nulla: la quarta volta prese, tremando, il battente di ferro in mano, e bussÃ² un \npiccolo colpettino. \nAspetta, aspetta, finalmente dopo mezzâ€™ora si \naprÃ¬ una finestra dellâ€™ultimo piano (la casa era \ndi quattro piani) e Pinocchio vide afiâ€™acciarsi una \ngrossa Lumaca, che aveva un lumicino acceso \nsul capo, la quale disse: \nâ€” Ohi e a questâ€™ora? \nâ€” La Fata Ã¨ in casa? â€” domandÃ² il burattino. \nâ€” La Fata dorme e non vuol essere svegliata: \nma tu chi sei? \nâ€” Sono io! \nâ€” Ohi io? \nâ€” Pinocchio. \nâ€” Chi Pinocchio? \nâ€” Il burattino, quello che sta in casa colla \nFatn. \n\n\nâ€” Ah! lio capito; â€” disse la Lumaca â€” aspettami costÃ¬ j elle ora scendo giÃ¹ e ti apro subito. \nâ€” Spicciatevi, per caritÃ , perchÃ¨ io muoio dal \nfreddo. \nâ€” Eagazzo mio, io sono una Lumaca, e le Lumache non hanno mai fretta. â€” \nIntanto passÃ² unâ€™ora, ne passarono due e la \nporta non si apriva: per cui Pinocchio, che tremava dal freddo, dalla paura e dallâ€™acqua che \naveva addosso, si fece cuore e bussÃ² una seconda \nvolta, e bussÃ² piÃ¹ forte. \nA quel secondo colpo si aprÃ¬ una finestra del \npiano di sotto e si affacciÃ² la solita Lumaca. \nâ€” Lumachina bella, â€” gridÃ² Pinocchio dalla \nstrada â€” sono due ore che aspetto! E due ore, \na questa serataccia, diventano piÃ¹ lunghe di due \nanni. Spicciatevi, per caritÃ . \nâ€” Ragazzo mio, â€” gli rispose dalla finestra \nquella bestiuola tutta pace e tutta flemma â€” ragazzo mio, io sono una Lumaca, e le Lumache \nnon hanno mai fretta. â€” E la finestra si richiuse. \nDi lÃ¬ a poco suonÃ² la mezzanotte: poi il tocco, \npoi le due dopo mezzanotte, e la porta era sempre chiusa. \nAllora Pinocchio, perduta la pazienza, afferrÃ² \ncon rabbia il battente della porta per bussare un \ncolpo da far rintronare tutto il casamento; ma il \n\n\nbattente che era di ferro, diventÃ² a un tratto \nunâ€™anguilla viva, che sgusciandogli dalle mani \nsparÃ¬ in un rigagnolo dâ€™acqua, che scorreva in \nmezzo alla strada. \nâ€” Ah! sÃ¬? â€” gridÃ² Pinocchio sempre piÃ¹ accecato dalla collera. â€” Se il battente Ã¨ sparito, \nio seguiterÃ² a bussare a furia di calci. â€” \nE tiratosi un poco indietro, lasciÃ² andare una \nsolennissima pedata nellâ€™uscio della casa. Il colpo \nfu cosÃ¬ forte, che il piede penetrÃ² nel legno fino \na mezzo: e quando il burattino si provÃ² a ricavarlo fuori, fu tutta fatica inutile, perchÃ¨ il piede \neâ€™era rimasto conficcato dentro, come un chiodo \nribadito. \nFiguratevi il povero Pinocchio! DovÃ¨ passare \ntutto il resto della notte con un piede in terra \ne con quellâ€™altro per aria. \nLa mattina, sul far del giorno, finalmente la \nporta si aprÃ¬. Quella brava bestiuola della Lumaca, a scendere dal quarto piano fino allâ€™uscio \ndi strada, ci aveva messo solamente nove ore. \nBisogna proprio dire che avesse fatto una sudata. \nâ€” Ohe cosa fate con codesto piede conficcato \nnellâ€™uscio? â€” domandÃ² ridendo al burattino. \nâ€” Ãˆ stata una disgrazia. Vedete un poâ€™. Lumachina bella, se vi riesce di liberarmi da questo supplizio. \n\n\nâ€” Eagazzo mio, costÃ¬ ci vuole iiu legnaiolo, \ne io non lio fatto mai la legnalo] a. \nâ€” Pregate la Fata da parte mia!... \nâ€” La Fata dorme e non vuol essere svegliata. \n\nf:^  â€™Ã¬ \n|!ÃŒÃŒ| \nipili \nlÃ¬ \nlâ€™ili \nâ€” Che cosa fate con codesto piede conficcato nellâ€™uscio? \n\nâ€” Ma che cosa volete che io faccia, inchiodato tutto il giorno a questa porta! \nâ€” Divertiti a contare le formicole che passano \nper la strada. \nâ€” Portatemi almeno qualche cosa da mangiare, perchÃ¨ mi sento rifinito. \n\n\nâ€” Subito! â€” disse la Lumaca. \nDifatti dopo tre ore e mezzo, Pinoccliio la \nvide tornare con nn vassoio dâ€™argento in capo. \nXel vassoio câ€™era un pane, un pollastro arrosto \ne quattro albicocche mature. \nâ€” Ecco la colazione che vi manda la Fata â€” \ndisse la Lumaca. \nAlla vista di quella grazia di Dio, il burattino \nsentÃ¬ consolarsi tutto. Ma quale fu il suo disinganno, quando incominciando a mangiare, si dovÃ¨ \naccorgere che il pane era di gesso, il pollastro di \ncartone e le quattro albicocche di alabastro, colorite, come se fossero vere. \nVoleva piangere, voleva darsi alla disperazione, voleva buttar via il vassoio e quel che \neâ€™era dentro; ma invece, o fosse il gran dolore \no la gran languidezza di stomaco, fatto sta che \ncadde svenuto. \nQuando si riebbe, si trovÃ² disteso sopra un \nsofÃ , e la Fata era accanto a lui. \nâ€” Anche per questa volta ti perdono: â€” gli \ndisse la Fata â€” ma guai a te, se me ne fai unâ€™altra delle tue!... â€” \n^Pinocchio promise e giurÃ² che avrebbe studiato, e che si sarebbe condotto sempre bene. \nE mantenne la parola per tutto il resto dellâ€™anno. \nDifatti agli esami delle vacanze, ebbe 1â€™onore di \n\nessere il piÃ¹ bravo della scuola; e i suoi portamenti, in generale, furono giudicati cosÃ¬ lodevoli \n\nl.irenze. \nCLi non ha veduto la gioia di Pinocchio, a questa notizia tanto \nsospirata, non potrÃ  mai figurarsela. \n\ne soddisfacenti, che la Fata, tutta contenta, gli \ndisse: \nâ€” Domani finalmente il tuo desiderio sarÃ  \nappagato! \nâ€” CioÃ¨! \n\n\nâ€” Domani finirai di essere un burattino di \nlegno, e diventerai un ragazzo per bene. â€” \nChi non ha veduto la gioia di Pinocchio, a \nquesta notizia tanto sospirata, non potrÃ  mai \nfigurarsela. Tutti i suoi amici e comi^agni di \nscuola dovevano essere invitati per il giorno \ndox)o a una gran colazione in casa della Fata, \nper festeggiare insieme il grande avvenimento: \ne la Fata aveva fatto preparare dugento tazze \ndi caffÃ¨â€”eâ€”latte e quattrocento panini imburrati \ndi dentro e di fuori. Quella giornata prometterla \ndi riuscire molto bella e molto allegra: ma.... \nDisgraziatamente, nella vita dei burattini, eâ€™Ã² \nsempre un ma, che sciupa ogni cosa."
original_string = "XXIX.\n\n\nMentre il pescatore era proprio sul punto di buttar Pinocchio nella padella, entrÃ² nella grotta un grosso cane condotto lÃ  dallâ€™odore acutissimo e ghiotto della frittura.\nâ€” Passa via! â€” gli gridÃ² il pescatore minacciandolo e tenendo sempre in mano il burattino infarinato.\nMa il povero cane aveva una fame per quattro, e mugolando e dimenando la coda, pareva che dicesse: â€• Dammi un boccon di frittura e ti lascio in pace.\nâ€” Passa via, ti dico! â€” gli ripetÃ¨ il pescatore; e allungÃ² la gamba per tirargli una pedata.\nAllora il cane che, quando aveva fame davvero, non era avvezzo a lasciarsi posar mosche sul naso, si rivoltÃ² ringhioso al pescatore, mostrandogli le sue terribili zanne.\nIn quel mentre si udÃ¬ nella grotta una vocina fioca fioca, che disse:\nâ€” Salvami, Alidoro! Se non mi salvi, son fritto!\nâ€” Passa via! â€” gli gridÃ² il pescatore.\n\nIl cane riconobbe subito la voce di Pinocchio, e si accÃ²rse con sua grandissima maraviglia, che la vocina era uscita da quel fagotto infarinato, che il pescatore teneva in mano.\nAllora che cosa fa? Spicca un gran lancio daterra, abbocca quel fagotto infarinato, e tenendolo leggermente coi denti, esce correndo dalla grotta, e via come un baleno!\nIl pescatore arrabbiatissimo di vedersi strappar di mano un pesce, che egli avrebbe mangiato tanto volentieri, si provÃ² a rincorrere il cane; ma fatti pochi passi gli venne un nodo di tosse e dovÃ¨ tornarsene indietro.\nIntanto Alidoro, ritrovata che ebbe la viottola\n\nTenendolo leggermente coi denti, esce correndo dalla grotta, e via come un baleno!\nche conduceva al paese, si fermÃ² e posÃ² delicatamente in terra lâ€™amico Pinocchio.\nâ€” Quanto ti debbo ringraziare! â€” disse il burattino.\nâ€” Non câ€™Ã¨ bisogno; â€” replicÃ² il cane â€” tu salvasti me, e quel che Ã¨ fatto Ã¨ reso. Si sa: in questo mondo bisogna tutti aiutarsi lâ€™uno con lâ€™altro.\nâ€” Ma come mai sei capitato in quella grotta?\nâ€” Ero sempre qui disteso sulla spiaggia piÃ¹ morto che vivo, quando il vento mi ha portato da lontano un odorino di frittura. Quellâ€™odorino mi ha stuzzicato lâ€™appetito, e io gli sono andato dietro. Se arrivavo un minuto piÃ¹ tardi!â€¦\nâ€” Non me lo dire! â€” urlÃ² Pinocchio che tremava ancora dalla paura. â€” Non me lo dire! Se tu arrivavi un minuto piÃ¹ tardi, a questâ€™ora io ero bellâ€™e fritto, mangiato e digerito. Brrr! mi vengono i brividi soltanto a pensarvi!â€¦ â€•\nAlidoro, ridendo, stese la zampa destra verso il burattino, il quale gliela strinse forte forte in segno di grande amicizia: e dopo si lasciarono.\nIl cane riprese la strada di casa: e Pinocchio, rimasto solo, andÃ² a una capanna lÃ¬ poco distante, e domandÃ² a un vecchietto che stava sulla porta a scaldarsi al sole:\nâ€” Dite, galantuomo, sapete nulla di un povero ragazzo ferito nel capo e che si chiamava Eugenio?\nâ€” Il ragazzo Ã¨ stato portato da alcuni pescatori in questa capanna, e oraâ€¦\nâ€” Ora sarÃ  morto!â€¦ â€” interruppe Pinocchio, con gran dolore.\nâ€” No: ora Ã¨ vivo, ed Ã¨ giÃ  ritornato a casa sua.\nâ€” Davvero?â€¦ davvero?â€¦ â€” gridÃ² il burattino,â€” Dite, galantuomo, sapete nulla di un povero ragazzo ferito nel capo e che si chiamava Eugenio?saltando dallâ€™allegrezza. â€” Dunque la ferita non era grave?...\nâ€” Ma poteva riuscire gravissima e anche mortale, â€” rispose il vecchietto â€” perchÃ¨ gli tirarono nel capo un grosso libro rilegato in cartone.\nâ€” E chi glielo tirÃ²?\nâ€” Un suo compagno di scuola: un certo Pinocchio....\nâ€” E chi Ã¨ questo Pinocchio? â€” domandÃ² il burattino facendo lo gnorri.\nâ€” Dicono che sia un ragazzaccio, un vagabondo, un vero rompicollo.\nâ€” Calunnie! Tutte calunnie!\nâ€” Lo conosci tu questo Pinocchio?\nâ€” Di vista! â€” rispose il burattino.\nâ€” E tu, che concetto ne hai? â€” gli chiese il vecchietto.\nâ€” A me mi pare un gran buon figliuolo, pieno di voglia di studiare, obbediente, affezionato al suo babbo e alla sua famiglia.... â€”\nMentre il burattino sfilava a faccia fresca tutte queste bugie, si toccÃ² il naso e si accorse che il naso gli era allungato piÃ¹ di un palmo. Allora tutto impaurito cominciÃ² a gridare:\nâ€” Non date retta, galantuomo, a tutto il bene che ve ne ho detto; perchÃ¨ conosco benissimo Pinocchio e posso assicurarvi anchâ€™io châ€™Ã¨ davveroun ragazzaccio, un disubbidiente e uno svogliato, e che invece di andare a scuola, va coi compagni a fare lo sbarazzino!\nAppena ebbe pronunziate queste parole, il suo naso raccorcÃ¬ e tornÃ² alla grandezza naturale, come era prima.\nâ€” E perchÃ¨ sei tutto bianco a codesto modo? â€” gli domandÃ² a un tratto il vecchietto.\nâ€” Vi dirÃ².... senza avvedermene, mi sono strofinato a un muro, che era imbiancato di fresco â€” rispose il burattino vergognandosi a raccontare che lo avevano infarinato come un pesce, per poi friggerlo in padella.\nâ€” O della tua giacchetta, deâ€™ tuoi calzoncini e del tuo berretto, che cosa ne hai fatto?\nâ€” Ho incontrato i ladri e mi hanno spogliato. Dite, buon vecchio, non avreste per caso da darmi un poâ€™ di vestituccio, tanto perchÃ¨ io possa ritornare a casa?\nâ€” Ragazzo mio; in quanto a vestiti, io non ho che un piccolo sacchetto, dove ci tengo i lupini. Se lo vuoi, piglialo: eccolo lÃ . â€”\nPinocchio non se lo fece dire due volte: prese subito il sacchetto dei lupini che era vuoto, e dopo averci fatto colle forbici una piccola buca nel fondo e due buche dalle parti, se lo infilÃ² a uso camicia. E vestito leggerino a quel modo,si avviÃ² verso il paese. Ma, lungo la strada, non si sentiva punto tranquillo; tantâ€™Ã¨ vero che faceva un passo avanti e uno indietro e, discorrendo da sÃ¨ solo andava dicendo:\nâ€” Come farÃ² a presentarmi alla mia buona\n\nE vestito leggerino a quel modo, si avviÃ² verso il paese.\nFatina? Che dirÃ  quando mi vedrÃ ?â€¦ VorrÃ  perdonarmi questa seconda birichinata?â€¦ Scommetto che non me la perdona!â€¦ oh! non me la perdona di certo!â€¦ E mi sta il dovere: perchÃ¨ io sono un monello che prometto sempre di correggermi, e non mantengo mai!â€¦ â€•\nArrivÃ² al paese che era giÃ  notte buia; e perchÃ¨ faceva tempaccio e lâ€™acqua veniva giÃ¹ a catinelle, andÃ² diritto diritto alla casa della Fata, collâ€™animo risoluto di bussare alla porta e di farsi aprire.\nMa quando fu lÃ¬, sentÃ¬ mancarsi il coraggio, e invece di bussare, si allontanÃ², correndo, una ventina di passi. Poi tornÃ² una seconda volta alla porta, e non concluse nulla: poi si avvicinÃ² una terza volta e nulla: la quarta volta prese, tremando, il battente di ferro in mano, e bussÃ² un piccolo colpettino.\nAspetta, aspetta, finalmente dopo mezzâ€™ora si aprÃ¬ una finestra dellâ€™ultimo piano (la casa era di quattro piani) e Pinocchio vide affacciarsi una grossa Lumaca, che aveva un lumicino acceso sul capo, la quale disse:\nâ€” Chi Ã¨ a questâ€™ora?\nâ€” La Fata Ã¨ in casa? â€” domandÃ² il burattino.\nâ€” La Fata dorme e non vuol essere svegliata: ma tu chi sei?\nâ€” Sono io!\nâ€” Chi io?\nâ€” Pinocchio.\nâ€” Chi Pinocchio?\nâ€” Il burattino, quello che sta in casa colla Fata.â€” Ah! ho capito; â€” disse la Lumaca â€” aspettami costÃ¬, che ora scendo giÃ¹ e ti apro subito.\nâ€” Spicciatevi, per caritÃ , perchÃ¨ io muoio dal freddo.\nâ€” Ragazzo mio, io sono una Lumaca, e le Lumache non hanno mai fretta. â€”\nIntanto passÃ² unâ€™ora, ne passarono due e la porta non si apriva: per cui Pinocchio, che tremava dal freddo, dalla paura e dallâ€™acqua che aveva addosso, si fece cuore e bussÃ² una seconda volta, e bussÃ² piÃ¹ forte.\nA quel secondo colpo si aprÃ¬ una finestra del piano di sotto e si affacciÃ² la solita Lumaca.\nâ€” Lumachina bella, â€” gridÃ² Pinocchio dalla strada, â€” sono due ore che aspetto! E due ore, a questa serataccia, diventano piÃ¹ lunghe di due anni. Spicciatevi, per caritÃ .\nâ€” Ragazzo mio â€” gli rispose dalla finestra quella bestiuola tutta pace e tutta flemma â€” ragazzo mio, io sono una Lumaca, e le Lumache non hanno mai fretta. â€” E la finestra si richiuse.\nDi lÃ¬ a poco suonÃ² la mezzanotte: poi il tocco, poi le due dopo mezzanotte, e la porta era sempre chiusa.\nAllora Pinocchio, perduta la pazienza, afferrÃ² con rabbia il battente della porta per bussare un gran colpo da far rintronare tutto il casamento; ma ilbattente che era di ferro, diventÃ² a un tratto unâ€™anguilla viva, che sgusciandogli dalle mani sparÃ¬ in un rigagnolo dâ€™acqua, che scorreva in mezzo alla strada.\nâ€” Ah, sÃ¬? â€” gridÃ² Pinocchio sempre piÃ¹ accecato dalla collera. â€” Se il battente Ã¨ sparito, io seguiterÃ² a bussare a furia di calci. â€”\nE tiratosi un poco indietro, lasciÃ² andare una solennissima pedata nellâ€™uscio della casa. Il colpo fu cosÃ¬ forte, che il piede penetrÃ² nel legno fino a mezzo: e quando il burattino si provÃ² a ricavarlo fuori, fu tutta fatica inutile, perchÃ¨ il piede câ€™era rimasto conficcato dentro, come un chiodo ribadito.\nFiguratevi il povero Pinocchio! DovÃ¨ passare tutto il resto della notte con un piede in terra e con quellâ€™altro per aria.\nLa mattina, sul far del giorno, finalmente la porta si aprÃ¬. Quella brava bestiuola della Lumaca, a scendere dal quarto piano fino allâ€™uscio di strada, ci aveva messo solamente nove ore. Bisogna proprio dire che avesse fatto una sudata.\nâ€” Che cosa fate con codesto piede conficcato nellâ€™uscio? â€” domandÃ² ridendo al burattino.\nâ€” Ãˆ stata una disgrazia. Vedete un poâ€™, Lumachina bella, se vi riesce di liberarmi da questo supplizio.â€• Ragazzo mio, costÃ¬ ci vuole un legnaiolo, e io non ho mai fatto la legnaiola.\nâ€” Pregate la Fata da parte mia!â€¦\nâ€” La Fata dorme e non vuol essere svegliata.\nâ€• Che cosa fate con codesto piede conficcato nell'uscio?\nâ€” Ma che cosa volete che io faccia, inchiodato tutto il giorno a questa porta?\nâ€” Divertiti a contare le formicole che passano per la strada.\nâ€” Portatemi almeno qualche cosa da mangiare, perchÃ¨ mi sento rifinito.â€” Subito! â€” disse la Lumaca.\nDifatti dopo tre ore e mezzo, Pinocchio la vide tornare con un vassoio dâ€™argento in capo. Nel vassoio câ€™era un pane, un pollastro arrosto e quattro albicocche mature.\nâ€” Ecco la colazione che vi manda la Fata â€” disse la Lumaca.\nAlla vista di quella grazia di Dio, il burattino sentÃ¬ consolarsi tutto. Ma quale fu il suo disinganno, quando incominciando a mangiare, si dovÃ¨ accorgere che il pane era di gesso, il pollastro di cartone e le quattro albicocche di alabastro, colorite, come se fossero vere.\nVoleva piangere, voleva darsi alla disperazione, voleva buttar via il vassoio e quel che câ€™era dentro; ma invece, o fosse il gran dolore o la gran languidezza di stomaco, fatto sta che cadde svenuto.\nQuando si riebbe, si trovÃ² disteso sopra un sofÃ , e la Fata era accanto a lui.\nâ€” Anche per questa volta ti perdono: â€” gli disse la Fata â€” ma guai a te, se me ne fai unâ€™altra delle tue!â€¦ â€”\nPinocchio promise e giurÃ² che avrebbe studiato, e che si sarebbe condotto sempre bene. E mantenne la parola per tutto il resto dellâ€™anno. Difatti agli esami delle vacanze, ebbe lâ€™onore diessere il piÃ¹ bravo della scuola; e i suoi portamenti, in generale, furono giudicati cosÃ¬ lodevoli\nChi non ha veduto la gioia di Pinocchio, a questa notizia tanto sospirata, non potrÃ  mai figurarsela.\ne soddisfacenti, che la Fata, tutta contenta, gli disse:\nâ€” Domani finalmente il tuo desiderio sarÃ  appagato!\nâ€” CioÃ¨?â€” Domani finirai di essere un burattino di legno, e diventerai un ragazzo per bene.â€”\nChi non ha veduto la gioia di Pinocchio, a questa notizia tanto sospirata, non potrÃ  mai figurarsela. Tutti i suoi amici e compagni di scuola dovevano essere invitati per il giorno dopo a una gran colazione in casa della Fata, per festeggiare insieme il grande avvenimento: e la Fata aveva fatto preparare dugento tazze di caffÃ¨-e-latte e quattrocento panini imburrati di dentro e di fuori. Quella giornata prometteva di riuscire molto bella e molto allegra: ma....\nDisgraziatamente, nella vita dei burattini, câ€™Ã¨ sempre unma, che sciupa ogni cosa.\n\n__________"
cleaned = full_preclean(ocr_string)

print("OCR originale:\n", ocr_string)
print("\nOriginale:\n", original_string)
print("\nTesto dopo pre-cleaning:\n", cleaned)'''


